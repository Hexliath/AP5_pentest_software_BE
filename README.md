# AP5 Pentest software : Binary exploitation

Hey u all,  
You will find in this repository some documentation along with exercices.   
You don't need to do it in order.  

Do not hesitate to ask me your questions.  


## Report guidelines

- Your report must contains the required content and has to be written in **Latex**  
- You start with 20 points. Each missing/wrong answer decrease your score by 1 point
- The report must be sent **before** the end of the weekend following the next classe. After that, youâ€™ll lose 1 points per hour.


## Setup

- Download and create a 64-bit linux based VM (debian is preferred) 
- Install gdb-peda 
- Install python3
- Install pwntools (using pip3 or pip)


## Compilation


```bash
gcc -g -fno-stack-protector -z execstack -mpreferred-stack-boundary=2 -m32  <exercise.c>  -o <exercice> 
```

### Explanations
 
- -m32: compile as a x32 binary
- -fno-stack-protector: Disable the stack exploitation mechanisms.
- -z execstack: The stack is executable  
- -mpreferred-stack-boundary=2: Align the stack 4-bytes

## Exercises

**Homework: Please create an unique markdown report and export it to pdf.**

### Exercise 1: Simple redirection

The goal is to get a bash shell.   
You will need to control EIP and redirect the execution flow to the shell() function.

#### Reporting requirements
- Crash screenshot
- Controlling the offset
- EIP = shell() address
- Whoami command on your popped shell.



### Exercice 2: Is there another very very secret way ?

Using Ghidra, decompile the program.
Find the master secret password.

#### Reporting requirements
- Screenshot of your program on Ghidra
- What is the hidden functionnality ? what is its purpose?


### Exercise 3: Jumping to your shellcode

Using the result you found in the second exercice you can now execute an injected payload of your choice.

Oh no wait, this shellcode :
http://shell-storm.org/shellcode/files/shellcode-833.php
(you will have to update your IP !)


#### Reporting requirements
- Crash screenshot
- Controlling the offset
- Find a "jmp esp"
- Jumping to a nop-slide
- Jumping to your shellcode
- The reverse shell appears
- Your exploit.py script





